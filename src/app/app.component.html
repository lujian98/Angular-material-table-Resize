<div class="page-container">
  <div class="form-container">
    <form #theForm="ngForm">
      <mat-form-field appearance="outline">
        <mat-label for="selColumns">Hide/Show Columns</mat-label>
        <mat-select matSelect id="id-selColumns" name="selColumns" [(ngModel)]="displayColumns" multiple (selectionChange)="onColumnSelect()">
          <mat-option *ngFor="let col of availableColumns" [value]="col">{{ col.field }}</mat-option>
        </mat-select>
      </mat-form-field>
    </form>
  </div>
  <div class="grid-container">
    <mat-table [dataSource]="dataSource" class="mat-elevation-z8" cdkDropListGroup matSort>
      <ng-container *ngFor="let column of availableColumns; let i = index" [matColumnDef]="column.field">
        <mat-header-cell *matHeaderCellDef (mousedown)="onResizeColumn($event, i)" cdkDropList cdkDropListLockAxis="x"
          cdkDropListOrientation="horizontal" (cdkDropListDropped)="dropListDropped($event, i)">
          <div mat-sort-header cdkDrag (cdkDragStarted)="dragStarted($event, i)"
            [cdkDragData]="{name: column.field, columIndex: i}">
            {{ column.field }}
          </div>
        </mat-header-cell>
        <mat-cell *matCellDef="let row"> {{ row[column.field] }} </mat-cell>
      </ng-container>
      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row *matRowDef="let row; columns: displayedColumns;"></mat-row>
    </mat-table>
  </div>
</div>